version: 2
project_name: falkordb-cli
before:
  hooks:
    # Ensure targets are available and build each platform binary with cargo
    # Only build linux targets on Linux runners. MSVC (Windows) and macOS
    # require platform-specific runners (windows-latest / macos-latest)
    - rustup target add x86_64-unknown-linux-musl || true
    - cargo build --release --target x86_64-unknown-linux-gnu || true
    - cargo build --release --target x86_64-unknown-linux-musl || true
builds:
  - skip: true
archives:
  - id: unix
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    files:
      - "target/*/release/falkordb-cli"
    formats: [ 'tar.gz' ]
  - id: windows
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    files:
      - "target/*/release/falkordb-cli.exe"
    formats: [ 'zip' ]
release:
  github:
    owner: FalkorDB
    name: falkordb-cli
checksum:
  name_template: "COMBINED_SHA256SUMS.txt"
signs: []
changelog:
  use: github